{"version":3,"sources":["Filter.jsx","PersonForm.jsx","Persons.jsx","services/personService.js","Notifications.jsx","App.js","index.js"],"names":["Filter","_ref","setFilter","react_default","a","createElement","onChange","event","target","value","PersonForm","setNewName","newName","setNewNumber","newNumber","addNewPerson","onClick","type","Persons","persons","deletePerson","map","person","index","key","concat","id","name","number","PERSONS_API","personService","getPersons","_getPersons","Object","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","axios","get","catch","error","console","log","response","abrupt","sent","stop","apply","this","arguments","createPerson","_createPerson","_callee2","_context2","post","_x","_deletePerson","_callee3","personId","_context3","delete","_x2","updatePerson","_updatePerson","_callee4","_context4","put","_x3","Notifications","notifications","notification","message","className","ERROR","SUCCESS","App","_useState","useState","_useState2","slicedToArray","setPersons","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","filterValue","_useState9","_useState10","setNotifications","clearInputFields","showNotification","newNotification","notificationsCopy","toConsumableArray","setTimeout","pop","removeNotification","data","_ref2","newPersonList","find","window","confirm","filter","status","useEffect","personsList","length","toLowerCase","includes","src_Notifications","src_Filter","src_PersonForm","preventDefault","foundPerson","updatedPerson","objectSpread","updatedPersonsList","personsCopy","newPerson","push","src_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.71281654.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({setFilter}) => {\n    return (\n        <div>\n            <form>\n                <div>\n                    Rajaa näytettäviä: <input onChange={(event) => setFilter(event.target.value)} />\n                </div>\n            </form>\n        </div>\n    );\n};\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = ({setNewName, newName, setNewNumber, newNumber, addNewPerson}) => {\n    return (\n        <form>\n            <div>\n                nimi: <input onChange={event => setNewName(event.target.value)} value={newName} />\n            </div>\n            <div>\n                numero: <input onChange={event => setNewNumber(event.target.value)} value={newNumber} />\n            </div>\n            <div>\n                <button onClick={addNewPerson} type=\"submit\">lisää</button>\n            </div>\n        </form>\n    );\n};\n\nexport default PersonForm;","import React from 'react';\n\nconst Persons = ({ persons, deletePerson }) => {\n    return (\n        <div>\n            {persons.map( (person, index) => {\n                return (\n                    <div key={`person-${person.id}-index-${index}`}>\n                        {`${person.name} ${person.number || ''}`}\n                        <button onClick={() => deletePerson(person.id)}>Poista</button>\n                    </div>\n                )}\n            )}\n        </div>\n    );\n};\n\nexport default Persons;","import axios from 'axios';\n\nconst PROTOCOL = 'http';\nconst HOST = 'localhost';\nconst PORT = 3001;\nconst PERSONS_API = `${PROTOCOL}://${HOST}:${PORT}/api/persons`;\n\nconst personService = {\n\n    getPersons: async () => {\n        return await axios.get(PERSONS_API)\n        .catch(error => {\n            console.log('Error GET /persons', error);\n            return error.response;\n        });\n    },\n\n    createPerson: async (person) => {\n        if (person) {\n            return await axios.post(PERSONS_API, person)\n            .catch(error => {\n                console.log('Error POST /persons', error);\n                return error.response;\n            });\n        }\n    },\n    deletePerson: async (personId) => {\n        if(personId) {\n            return await axios.delete(`${PERSONS_API}/${personId}`)\n            .catch( error => {\n                console.log(`ERROR DELETE /persons${personId}`,error.response);\n                return error.response;\n            })\n        }\n    },\n    updatePerson: async (person) => {\n        if(person) {\n            return await axios.put(`${PERSONS_API}/${person.id}`, person)\n            .catch( error => {\n                console.log(`ERROR PUT /persons/${person.id}`, error);\n                return error.response;\n            });\n        }\n    }\n}\n\nexport default personService;","import React from 'react';\nimport './notification.css';\n\nconst Notifications = ({notifications}) => {\n    return (\n        <ul>\n            {notifications.map( (notification, index) => <li key={`notification-${notification.message}-${index}`} className={`notification-${notification.type}`}>{notification.message}</li>)}\n        </ul>\n    );\n};\n\nNotifications.ERROR = 'error';\nNotifications.SUCCESS = 'success';\n\nexport default Notifications;","import React, { useState, useEffect } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport personService from './services/personService';\nimport Notifications from './Notifications';\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const [filterValue, setFilter] = useState('');\n    const [notifications, setNotifications] = useState([])\n\n    const clearInputFields = () => {\n        setNewName('');\n        setNewNumber('');\n    }\n    const removeNotification = (notifications) => {\n        const notificationsCopy = [...notifications];\n        notificationsCopy.pop();\n        setNotifications(notificationsCopy)\n    }\n\n    const showNotification = (message, type) => {\n        const newNotification = { message, type };\n        const notificationsCopy = [...notifications].concat([newNotification]);\n        setNotifications(notificationsCopy);\n\n        setTimeout(() => {removeNotification(notificationsCopy)}, 3000);\n    }\n\n    const getPersons = async () => {\n        const response = await personService.getPersons();\n        const { data } = response;\n        setPersons(data);\n    }\n    const addNewPerson = (event) => {\n        event.preventDefault();\n        const foundPerson = persons.find((person) => person.name === newName)\n        if (foundPerson) {\n            if (window.confirm(`${newName} on jo luettelossa. Korvataanko vanha numero uudella?`)) {\n                const updatedPerson = { ...foundPerson, number: newNumber }\n                const updatedPersonsList = persons.map(person => person.id === updatedPerson.id ? updatedPerson : person);\n                setPersons(updatedPersonsList);\n                personService.updatePerson(updatedPerson);\n                clearInputFields();\n            }\n        }\n        else {\n            const personsCopy = [...persons];\n            const newPerson = { name: newName, number: newNumber };\n\n            personsCopy.push(newPerson);\n            setPersons(personsCopy);\n            personService.createPerson(newPerson);\n            clearInputFields();\n            showNotification(`Lisättiin ${newPerson.name}.`, Notifications.SUCCESS);\n        }\n    }\n    const deletePerson = async (personId) => {\n        const person = persons.find(person => person.id === personId);\n        if (window.confirm(`Poistetaanko henkilö ${person.name}?`)) {\n            const newPersonList = persons.filter(person => person.id !== personId);\n            setPersons(newPersonList);\n            const response = await personService.deletePerson(personId);\n            if (response && response.status === 200) {\n                showNotification(`${person.name} poistettiin.`, Notifications.SUCCESS);\n            }\n            if(response && response.status === 404) {\n                showNotification(`Henkilö ${person.name} oli jo poistettu.`, Notifications.ERROR);\n            }\n            \n        }\n\n    }\n\n    useEffect(() =>{\n        getPersons();\n    }, []);\n\n    \n    const filteredResult = filterValue.length > 0 && persons.filter( person => person.name.toLowerCase().includes(filterValue.toLowerCase()));\n    const personsList = filteredResult || persons;\n\n    return (\n        <div>\n            <Notifications notifications={notifications} />\n            <h2>Puhelinluettelo</h2>\n            <Filter setFilter={setFilter}/>\n            <PersonForm \n                setNewName={setNewName}\n                newName={newName}\n                setNewNumber={setNewNumber}\n                newNumber={newNumber}\n                addNewPerson={addNewPerson}\n            />\n            <h2>Numerot</h2>\n            <Persons deletePerson={deletePerson} persons={personsList} />\n    </div>\n    )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}