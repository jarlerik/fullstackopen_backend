{"version":3,"sources":["Filter.jsx","PersonForm.jsx","Persons.jsx","services/personService.js","Notifications.jsx","App.js","index.js"],"names":["Filter","_ref","setFilter","react_default","a","createElement","onChange","event","target","value","PersonForm","setNewName","newName","setNewNumber","newNumber","addNewPerson","onClick","type","Persons","persons","deletePerson","map","person","index","key","concat","id","name","number","PERSONS_API","process","personService","getPersons","_getPersons","Object","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","prev","next","axios","get","catch","error","console","log","data","sent","abrupt","stop","apply","this","arguments","createPerson","_createPerson","_callee2","_context2","post","_x","_deletePerson","_callee3","personId","_context3","delete","_x2","updatePerson","_updatePerson","_callee4","_context4","put","_x3","Notifications","notifications","notification","message","className","ERROR","SUCCESS","App","_useState","useState","_useState2","slicedToArray","setPersons","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","filterValue","_useState9","_useState10","setNotifications","clearInputFields","showNotification","newNotification","notificationsCopy","toConsumableArray","setTimeout","pop","removeNotification","_ref2","foundPerson","updatedPerson","updatedPersonsList","newPerson","_response","personsCopy","preventDefault","find","window","confirm","objectSpread","push","_ref3","newPersonList","filter","status","useEffect","personsList","length","toLowerCase","includes","src_Notifications","src_Filter","src_PersonForm","src_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.d2896e68.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({setFilter}) => {\n    return (\n        <div>\n            <form>\n                <div>\n                    Rajaa näytettäviä: <input onChange={(event) => setFilter(event.target.value)} />\n                </div>\n            </form>\n        </div>\n    );\n};\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = ({setNewName, newName, setNewNumber, newNumber, addNewPerson}) => {\n    return (\n        <form>\n            <div>\n                nimi: <input onChange={event => setNewName(event.target.value)} value={newName} />\n            </div>\n            <div>\n                numero: <input onChange={event => setNewNumber(event.target.value)} value={newNumber} />\n            </div>\n            <div>\n                <button onClick={addNewPerson} type=\"submit\">lisää</button>\n            </div>\n        </form>\n    );\n};\n\nexport default PersonForm;","import React from 'react';\n\nconst Persons = ({ persons, deletePerson }) => {\n    return (\n        <div>\n            {persons && persons.map( (person, index) => {\n                return (\n                    <div key={`person-${person.id}-index-${index}`}>\n                        {`${person.name} ${person.number || ''}`}\n                        <button onClick={() => deletePerson(person.id)}>Poista</button>\n                    </div>\n                )}\n            )}\n        </div>\n    );\n};\n\nexport default Persons;","import axios from 'axios'\n\nconst API_URL = process.env.REACT_APP_API_URL\nconst PERSONS_API = `${API_URL}/api/persons`\n\nconst personService = {\n\n    getPersons: async () => {\n        const response = await axios.get(PERSONS_API)\n        .catch(error => {\n            console.log('Error GET /persons', error)\n            return error.response.data\n        });\n        console.log(response)\n        return response\n    },\n\n    createPerson: async (person) => {\n        if (person) {\n                const response = await axios.post(PERSONS_API, person)\n                    .catch(error => {\n                        console.log('Error POST /persons', error)\n                        return error.response.data\n                    })\n                return response\n        }\n\n    },\n    deletePerson: async (personId) => {\n        if(personId) {\n            return await axios.delete(`${PERSONS_API}/${personId}`)\n            .catch( error => {\n                console.log(`ERROR DELETE /persons${personId}`,error.response)\n                return error.response.data\n            })\n        }\n    },\n    updatePerson: async (person) => {\n        if(person) {\n            return await axios.put(`${PERSONS_API}/${person.id}`, person)\n            .catch( error => {\n                console.log(`ERROR PUT /persons/${person.id}`, error)\n                return error.response.data\n            })\n        }\n    }\n}\n\nexport default personService;","import React from 'react';\nimport './notification.css';\n\nconst Notifications = ({notifications}) => {\n    return (\n        <ul>\n            {notifications.map( (notification, index) => <li key={`notification-${notification.message}-${index}`} className={`notification-${notification.type}`}>{notification.message}</li>)}\n        </ul>\n    );\n};\n\nNotifications.ERROR = 'error';\nNotifications.SUCCESS = 'success';\n\nexport default Notifications;","import React, { useState, useEffect } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport personService from './services/personService';\nimport Notifications from './Notifications';\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const [filterValue, setFilter] = useState('');\n    const [notifications, setNotifications] = useState([])\n\n    const clearInputFields = () => {\n        setNewName('');\n        setNewNumber('');\n    }\n    const removeNotification = (notifications) => {\n        const notificationsCopy = [...notifications];\n        notificationsCopy.pop();\n        setNotifications(notificationsCopy)\n    }\n\n    const showNotification = (message, type) => {\n        const newNotification = { message, type };\n        const notificationsCopy = [...notifications].concat([newNotification]);\n        setNotifications(notificationsCopy);\n\n        setTimeout(() => {removeNotification(notificationsCopy)}, 3000);\n    }\n\n    const getPersons = async () => {\n        const response = await personService.getPersons();\n        const { data } = response;\n        setPersons(data);\n    }\n    const addNewPerson = async (event) => {\n        event.preventDefault();\n        const foundPerson = persons.find((person) => person.name === newName)\n        if (foundPerson) {\n            if (window.confirm(`${newName} on jo luettelossa. Korvataanko vanha numero uudella?`)) {\n                const updatedPerson = { ...foundPerson, number: newNumber }\n                const response = await personService.updatePerson(updatedPerson)\n                if (response.data) {\n                    const updatedPersonsList = persons.map(person => person.id === updatedPerson.id ? updatedPerson : person);\n                    setPersons(updatedPersonsList);\n                    showNotification(`${updatedPerson.name} päivitetty.`, Notifications.SUCCESS);\n                    clearInputFields();\n                }\n                else {\n                    response.error && showNotification(`${response.error.message}`, Notifications.ERROR)\n                }\n            }\n        }\n        else {\n            const newPerson = {\n                name: newName,\n                number: newNumber\n            };\n\n            const response = await personService.createPerson(newPerson);\n\n            if(response.data) {\n                const personsCopy = [...persons];\n                \n\n                personsCopy.push(newPerson);\n                setPersons(personsCopy);\n                clearInputFields();\n                showNotification(`Lisättiin ${newPerson.name}.`, Notifications.SUCCESS);\n            }\n            else {\n                response.error && showNotification(`${response.error.message}`, Notifications.ERROR)\n            }\n            \n\n        }\n    }\n    const deletePerson = async (personId) => {\n        const person = persons.find(person => person.id === personId);\n        if (window.confirm(`Poistetaanko henkilö ${person.name}?`)) {\n            const newPersonList = persons.filter(person => person.id !== personId);\n            setPersons(newPersonList);\n            const response = await personService.deletePerson(personId);\n            if (response && response.status === 200) {\n                showNotification(`${person.name} poistettiin.`, Notifications.SUCCESS);\n            }\n            if(response && response.status === 404) {\n                showNotification(`Henkilö ${person.name} oli jo poistettu.`, Notifications.ERROR);\n            }\n            \n        }\n\n    }\n\n    useEffect(() =>{\n        getPersons();\n    }, []);\n\n    \n    const filteredResult = filterValue.length > 0 && persons.filter( person => person.name.toLowerCase().includes(filterValue.toLowerCase()));\n    const personsList = filteredResult || persons;\n    return (\n        <div>\n            <Notifications notifications={notifications} />\n            <h2>Puhelinluettelo</h2>\n            <Filter setFilter={setFilter}/>\n            <PersonForm \n                setNewName={setNewName}\n                newName={newName}\n                setNewNumber={setNewNumber}\n                newNumber={newNumber}\n                addNewPerson={addNewPerson}\n            />\n            <h2>Numerot</h2>\n            <Persons deletePerson={deletePerson} persons={personsList} />\n        </div>\n    )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}