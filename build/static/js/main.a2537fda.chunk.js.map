{"version":3,"sources":["Filter.jsx","PersonForm.jsx","Persons.jsx","services/personService.js","Notifications.jsx","App.js","index.js"],"names":["Filter","_ref","setFilter","react_default","a","createElement","onChange","event","target","value","PersonForm","setNewName","newName","setNewNumber","newNumber","addNewPerson","onClick","type","Persons","persons","deletePerson","map","person","index","key","concat","id","name","number","PERSONS_API","process","personService","getPersons","_getPersons","Object","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","axios","get","catch","error","console","log","response","abrupt","sent","stop","apply","this","arguments","createPerson","_createPerson","_callee2","_context2","post","data","_x","_deletePerson","_callee3","personId","_context3","delete","_x2","updatePerson","_updatePerson","_callee4","_context4","put","_x3","Notifications","notifications","notification","message","className","ERROR","SUCCESS","App","_useState","useState","_useState2","slicedToArray","setPersons","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","filterValue","_useState9","_useState10","setNotifications","clearInputFields","showNotification","newNotification","notificationsCopy","toConsumableArray","setTimeout","pop","removeNotification","_ref2","foundPerson","updatedPerson","updatedPersonsList","newPerson","personsCopy","preventDefault","find","window","confirm","objectSpread","status","push","_ref3","newPersonList","filter","useEffect","personsList","length","toLowerCase","includes","src_Notifications","src_Filter","src_PersonForm","src_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.a2537fda.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({setFilter}) => {\n    return (\n        <div>\n            <form>\n                <div>\n                    Rajaa näytettäviä: <input onChange={(event) => setFilter(event.target.value)} />\n                </div>\n            </form>\n        </div>\n    );\n};\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = ({setNewName, newName, setNewNumber, newNumber, addNewPerson}) => {\n    return (\n        <form>\n            <div>\n                nimi: <input onChange={event => setNewName(event.target.value)} value={newName} />\n            </div>\n            <div>\n                numero: <input onChange={event => setNewNumber(event.target.value)} value={newNumber} />\n            </div>\n            <div>\n                <button onClick={addNewPerson} type=\"submit\">lisää</button>\n            </div>\n        </form>\n    );\n};\n\nexport default PersonForm;","import React from 'react';\n\nconst Persons = ({ persons, deletePerson }) => {\n    return (\n        <div>\n            {persons && persons.map( (person, index) => {\n                return (\n                    <div key={`person-${person.id}-index-${index}`}>\n                        {`${person.name} ${person.number || ''}`}\n                        <button onClick={() => deletePerson(person.id)}>Poista</button>\n                    </div>\n                )}\n            )}\n        </div>\n    );\n};\n\nexport default Persons;","import axios from 'axios';\n\nconst API_URL = process.env.REACT_APP_API_URL;\nconst PERSONS_API = `${API_URL}/api/persons`;\n\nconst personService = {\n\n    getPersons: async () => {\n        return await axios.get(PERSONS_API)\n        .catch(error => {\n            console.log('Error GET /persons', error);\n            return error.response;\n        });\n    },\n\n    createPerson: async (person) => {\n        if (person) {\n                const response = await axios.post(PERSONS_API, person)\n                    .catch(error => {\n                        console.log('Error POST /persons', error);\n                        return error.response.data\n                    })\n                return response\n        }\n\n    },\n    deletePerson: async (personId) => {\n        if(personId) {\n            return await axios.delete(`${PERSONS_API}/${personId}`)\n            .catch( error => {\n                console.log(`ERROR DELETE /persons${personId}`,error.response);\n                return error.response;\n            })\n        }\n    },\n    updatePerson: async (person) => {\n        if(person) {\n            return await axios.put(`${PERSONS_API}/${person.id}`, person)\n            .catch( error => {\n                console.log(`ERROR PUT /persons/${person.id}`, error);\n                return error.response;\n            });\n        }\n    }\n}\n\nexport default personService;","import React from 'react';\nimport './notification.css';\n\nconst Notifications = ({notifications}) => {\n    return (\n        <ul>\n            {notifications.map( (notification, index) => <li key={`notification-${notification.message}-${index}`} className={`notification-${notification.type}`}>{notification.message}</li>)}\n        </ul>\n    );\n};\n\nNotifications.ERROR = 'error';\nNotifications.SUCCESS = 'success';\n\nexport default Notifications;","import React, { useState, useEffect } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport personService from './services/personService';\nimport Notifications from './Notifications';\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const [filterValue, setFilter] = useState('');\n    const [notifications, setNotifications] = useState([])\n\n    const clearInputFields = () => {\n        setNewName('');\n        setNewNumber('');\n    }\n    const removeNotification = (notifications) => {\n        const notificationsCopy = [...notifications];\n        notificationsCopy.pop();\n        setNotifications(notificationsCopy)\n    }\n\n    const showNotification = (message, type) => {\n        const newNotification = { message, type };\n        const notificationsCopy = [...notifications].concat([newNotification]);\n        setNotifications(notificationsCopy);\n\n        setTimeout(() => {removeNotification(notificationsCopy)}, 3000);\n    }\n\n    const getPersons = async () => {\n        const response = await personService.getPersons();\n        const { data } = response;\n        setPersons(data);\n    }\n    const addNewPerson = async (event) => {\n        event.preventDefault();\n        const foundPerson = persons.find((person) => person.name === newName)\n        if (foundPerson) {\n            if (window.confirm(`${newName} on jo luettelossa. Korvataanko vanha numero uudella?`)) {\n                const updatedPerson = { ...foundPerson, number: newNumber }\n                const updatedPersonsList = persons.map(person => person.id === updatedPerson.id ? updatedPerson : person);\n                const personServiceResponse = await personService.updatePerson(updatedPerson);\n                setPersons(updatedPersonsList);\n                \n                clearInputFields();\n            }\n        }\n        else {\n            const newPerson = {\n                name: newName,\n                number: newNumber\n            };\n\n            const response = await personService.createPerson(newPerson);\n            console.log('personServiceResponse:', response)\n\n            if(response.status === 200) {\n                const personsCopy = [...persons];\n                \n\n                personsCopy.push(newPerson);\n                setPersons(personsCopy);\n                clearInputFields();\n                showNotification(`Lisättiin ${newPerson.name}.`, Notifications.SUCCESS);\n            }\n            else {\n                showNotification(`${response.error.message}`, Notifications.ERROR)\n            }\n            \n\n        }\n    }\n    const deletePerson = async (personId) => {\n        const person = persons.find(person => person.id === personId);\n        if (window.confirm(`Poistetaanko henkilö ${person.name}?`)) {\n            const newPersonList = persons.filter(person => person.id !== personId);\n            setPersons(newPersonList);\n            const response = await personService.deletePerson(personId);\n            if (response && response.status === 200) {\n                showNotification(`${person.name} poistettiin.`, Notifications.SUCCESS);\n            }\n            if(response && response.status === 404) {\n                showNotification(`Henkilö ${person.name} oli jo poistettu.`, Notifications.ERROR);\n            }\n            \n        }\n\n    }\n\n    useEffect(() =>{\n        getPersons();\n    }, []);\n\n    \n    const filteredResult = filterValue.length > 0 && persons.filter( person => person.name.toLowerCase().includes(filterValue.toLowerCase()));\n    const personsList = filteredResult || persons;\n    return (\n        <div>\n            <Notifications notifications={notifications} />\n            <h2>Puhelinluettelo</h2>\n            <Filter setFilter={setFilter}/>\n            <PersonForm \n                setNewName={setNewName}\n                newName={newName}\n                setNewNumber={setNewNumber}\n                newNumber={newNumber}\n                addNewPerson={addNewPerson}\n            />\n            <h2>Numerot</h2>\n            <Persons deletePerson={deletePerson} persons={personsList} />\n        </div>\n    )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}